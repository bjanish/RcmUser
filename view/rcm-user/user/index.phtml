<?php
?>
<pre>
<?php
/* ACL STUFF
$x = $this->isAllowed('pants', 'wear');

$u = $this->zfcUserIdentity();

var_dump($u);

$acl = new Acl();
*/
//$userService = new RcmUser\Service\RcmUserService();
//var_dump($userService->getUserInputFilter()); die;

$user = $userService->buildNewUser();

//$user->setId('fdbeae1a-3d7c-42cf-aa4d-b5aa04e4840c');

//$user->setId('57a4de8e-225b-4e31-9f88-19ddb14fc13c');

//$user->setId('ee827d29-4940-4181-93a7-846820a75855');
$user->setUsername('Jimmyy');
$user->setPassword('1231231232');

echo "**Before action:\n";
var_dump($user);

/* AUTH ***********************************/

/* AUTH CHECK */
$authResult = $userService->validateCredentials($user);

echo "GenAuth Result: ".var_export($authResult->isValid(), true)."\n";
var_dump($authResult);
/* */

/*  LOG IN *
$authResult = $userService->authenticate($user);

echo "Sess Auth Result: ".var_export($authResult->isValid(), true)."\n";
var_dump($authResult);
/*  */

/* GET SESSION USER *
echo "Session user: \n";
var_dump($userService->getIdentity());
/* */

/*  LOG OUT *
$userService->clearIdentity();

echo "Session user after log out: \n";
var_dump($userService->getIdentity());

/* */

/* CRUD ***********************************/
/* CREATE *
$result = $userService->createUser($user);

echo "**After create:\n";
if(!$result->isSuccess()){

    echo "ERROR: ";
    var_dump($result->getMessages());
}

var_dump($result->getUser());
/* */

/* READ *
$result = $userService->readUser($user);

echo "**After read:\n";
if(!$result->isSuccess()){

    echo "ERROR: ";
    var_dump($result->getMessages());
}

var_dump($result->getUser());
/* */

/* UPDATE *
$result = $userService->updateUser($user);

echo "**After update:\n";
if(!$result->isSuccess()){

    echo "ERROR: ";
    var_dump($result->getMessages());
}

var_dump($result->getUser());
/* */

/* DELETE *
$result = $userService->deleteUser($user);

echo "**After delete:\n";
if(!$result->isSuccess()){

    echo "ERROR: ";
    var_dump($result->getMessages());
}

var_dump($result->getUser());
/* */

/* */

/* ACL ************************************/

/* */

?>

</pre>