<?php
/*
 * @todo This may be wrapped in a service so the application can determine dependencies
 *
 */
$this->rcmIncludeAngularJs(
    array(
        'js' => array(
            'angular-ui/bootstrap/ui-bootstrap-tpls-0.11.0.min.js'
        )
    )
);

$this->rcmIncludeTwitterBootstrap(
    array(
        'css' => array(
            'css/bootstrap-theme.css',
            //'css/bootstrap-theme.css.map',
        )
    )
);
/*
 * END SERVICE
 */

$this->headLink()->appendStylesheet($this->url('RcmUserAdminCss'));
$this->headScript()->appendFile($this->url('RcmUserAdminJs'));

?>
<div ng-app="rcmuserAdminAclApp">
<div class="rcmuser" ng-controller="rcmuserAdminAclRoles">
    <div class="container-fluid admin-acl">

        <div class="container-fluid">
            <h1>Access
                <small>Control user roles and access</small>
            </h1>
            <p class="lead">Set up the user roles and access to resources.</p>
        </div>

            <pre>{roles|json}</pre>

        <div class="container-fluid">

            <accordion close-others="oneAtATime">

                <!-- + ROLE -->
                <accordion-group is-open="isopen.roleId" heading="{{role.roleId}}" ng-repeat="roleData in roles">


                    <accordion-heading>
                        <div class="accordion-heading">
                            <span tooltip-placement="right" tooltip="This is a user role.">{{roleData.role.roleId}}</span>
                            <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': isopen.roleId, 'glyphicon-chevron-right': !isopen.roleId}"></i>
                        </div>
                    </accordion-heading>

                    <!-- + RESOURCE -->
                    <div class="container-fluid admin-acl-resource-section" ng-repeat="ruleData in roleData.rules">

                        <div class="container-fluid admin-acl-resource-row">
                            <div class="admin-acl-resource-col">
                                <div>Resource: {{resources[ruleData.resource].resource.resourceId}}</div>
                                <div>NameSpace: {{resources[ruleData.resource].resourceNs}}</div>
                                <div>{{resources[ruleData.resource].resource.description}}</div>
                            </div>
                        </div>

                        <div class="container admin-acl-permissions-row">
                            Rule: {{ruleData.rule}} Privilege: {{(ruleData.privilege || '*')}} <button type="button"><i class="glyphicon glyphicon glyphicon-minus"> remove rule</i></button>
                        </div>
                    </div>

                    <div>
                        <button type="button"><i class="glyphicon glyphicon glyphicon-plus"> add rule</i></button>
                    </div>
                    <!-- + RESOURCE -->
                </accordion-group>
                <!-- - ROLE -->
            </accordion>
        </div>
    </div>
</div>
</div>
